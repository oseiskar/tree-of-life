<!DOCTYPE html>
<html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
	<script src="tree.js"></script>
</head>
<body>
<div id="loader">loading...</div>
<div id="tree"></div>
</body>
<script type="text/javascript">
    
    function appendChildren(selector, data) {
        var lis = selector.append('ul')
            .selectAll('li')
            .data(data)
            .enter()
            .append('li');
        
        lis.append('button')
            .text('+')
            .on('click', function(d,i) {
                var btn = d3.select(this);
                btn.attr('style', 'display: none');
                
                var li = d3.select(btn.node().parentNode);
                if (d.c) appendChildren(li, d.c);
            });
        
        lis.append('span').text(' ')
        lis.append('span')
            .text(function (d) { return d.n; });
    }
    
	d3.json('out.json', function (error, data) {
        if (error) alert(error);
        window.tol = data;
		d3.select('#loader').attr('style', 'display: none');
        
        appendChildren(d3.select('#tree'), [data]);
	});
</script>
</html>
